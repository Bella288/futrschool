<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Class Setup - GradeLine</title>
  <meta name="description" content="Add and manage your classes in GradeLine to track grades and schedules">
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="icon" type="image/png" href="/assets/icons/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/assets/icons/favicon.svg" />
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="GradeLine" />
  <link rel="manifest" href="/assets/icons/site.webmanifest" />
  <style>
    /* Dyslexia-friendly font class */
    .dyslexia-mode {
      font-family: "OpenDyslexic", "Comic Sans MS", sans-serif;
      letter-spacing: 0.05em;
      line-height: 1.6;
    }
    
    /* Skip to main content link */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: #000;
      color: white;
      padding: 8px 12px;
      z-index: 10000;
      text-decoration: none;
      border-radius: 4px;
      font-weight: bold;
    }
    .skip-link:focus {
      top: 0;
    }
    
    /* Dyslexia toggle button */
    .dyslexia-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #0066cc;
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .dyslexia-toggle:hover {
      background: #0052a3;
    }
    .dyslexia-toggle:focus {
      outline: 3px solid #ffbf47;
    }
    
    /* About button styles */
    .about-button {
      position: fixed;
      top: 15px;
      right: 15px;
      width: 32px;
      height: 32px;
      cursor: pointer;
      transition: transform 0.2s;
      z-index: 1001;
    }
    .about-button:hover {
      transform: scale(1.1);
    }
    
    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1002;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.6);
      overflow: auto;
    }
    .modal-content {
      background-color: #fefefe;
      margin: 5% auto;
      padding: 25px;
      border-radius: 10px;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      position: relative;
    }
    .close-button {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      position: absolute;
      right: 15px;
      top: 10px;
      background: none;
      border: none;
    }
    .close-button:hover,
    .close-button:focus {
      color: black;
      outline: 2px solid #000;
    }
    
    /* Focus styles for better accessibility */
    a:focus,
    button:focus,
    input:focus {
      outline: 2px solid #0066cc;
      outline-offset: 2px;
    }
    
    /* Form styles */
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    input[type="text"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
    }
    
    button[type="submit"] {
      background-color: #4CAF50;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    
    button[type="submit"]:hover {
      background-color: #45a049;
    }
    
    /* High contrast mode support */
    @media (prefers-contrast: high) {
      a:focus,
      button:focus,
      input:focus {
        outline: 3px solid #000000;
        background-color: #ffff00;
        color: #000000;
      }
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  
  <img src="https://raw.githubusercontent.com/Bella288/F1View/main/images/about_ico.png" 
       alt="About GradeLine" class="about-button" title="About the creator and page" id="aboutBtn">
  
  <button class="dyslexia-toggle" id="dyslexiaToggle" title="Toggle dyslexia-friendly font" aria-pressed="false">
    D
  </button>
  
  <nav class="navbar" aria-label="Main navigation">
    <a href="index.html" class="active" aria-current="page">üè´ Class Setup</a>
    <a href="dashboard.html">üìã Dashboard</a>
    <a href="schedule.html">‚è∞ Schedule</a>
    <a href="overview.html">üìä Overview</a>
    <a href="quicklinks.html">üîó Quick Links</a>
    <a href="settings.html">‚öôÔ∏è Settings</a>
    <a href="policies.html">üìë Policies</a>
  </nav>
  
  <!-- About Modal -->
  <div id="aboutModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-content">
      <button class="close-button" aria-label="Close dialog">&times;</button>
      <h2 id="modalTitle">About GradeLine</h2>
      <p><strong>Creator:</strong> Bella Lawrence</p>
      <p><strong>YouTube:</strong> <a href="https://youtube.com/@SerialDesignationN-BL" target="_blank">youtube.com/@SerialDesignationN-BL</a></p>
      <p><strong>Instagram:</strong> @q_law09</p>
      <p><strong>Email:</strong> <a href="mailto:barbar288.2021@gmail.com">barbar288.2021@gmail.com</a></p>
      <p><strong>Source Code:</strong> <a href="https://github.com/Bella288/futrschool" target="_blank">github.com/Bella288/futrschool</a></p>
      <hr>
      <p><strong>Why I made it:</strong> To help me and others keep track of their grades and schedules.</p>
      <p><strong>Other use cases:</strong> Teachers can track overall average grade by class</p>
      <p><strong>Features:</strong> Schedule view, classes and assignments, weighted categories, auto-grade calculation, and more</p>
      <hr>
      <p><strong>My Bio:</strong> Hey! I'm Bella Lawrence, a developer in the wonderful city of Fort Wayne, Indiana. I live with my two cats, Hermione and Barley, my dog, Pebbles, and my rabbit, Buttercup.</p>
    </div>
  </div>

  <header><h1>üìò Add Classes</h1></header>
  <main id="main-content" tabindex="-1">
    <form id="add-class-form" aria-labelledby="form-heading">
      <h2 id="form-heading" class="visually-hidden">Add a New Class</h2>
      <div class="form-group">
        <label for="class-name">Class Name</label>
        <input type="text" id="class-name" placeholder="Class Name" required aria-required="true" />
      </div>
      <div class="form-group">
        <label for="room-number">Room Number</label>
        <input type="text" id="room-number" placeholder="Room Number" />
      </div>
      <div class="form-group">
        <label for="teacher-name">Teacher Name</label>
        <input type="text" id="teacher-name" placeholder="Teacher Name" />
      </div>
      <div class="form-group">
        <label for="period">Class Period</label>
        <input type="text" id="period" placeholder="Class Period" />
      </div>
      <button type="submit">Add Class</button>
    </form>
    <section id="class-list" aria-label="Your classes">
      <h2 class="visually-hidden">Your Classes</h2>
    </section>
  </main>
  <script src="js/classes.js"></script>
  <script>
    // Load dyslexia preference from localStorage
    document.addEventListener('DOMContentLoaded', function() {
      const isDyslexiaMode = localStorage.getItem('dyslexiaMode') === 'true';
      const dyslexiaToggle = document.getElementById('dyslexiaToggle');
      
      if (isDyslexiaMode) {
        document.body.classList.add('dyslexia-mode');
        dyslexiaToggle.setAttribute('aria-pressed', 'true');
      }
      
      // Set up dyslexia mode toggle
      dyslexiaToggle.addEventListener('click', function() {
        const isPressed = this.getAttribute('aria-pressed') === 'true';
        this.setAttribute('aria-pressed', !isPressed);
        document.body.classList.toggle('dyslexia-mode');
        localStorage.setItem('dyslexiaMode', !isPressed);
        
        // Announce change for screen readers
        const liveRegion = document.querySelector('[aria-live]') || createLiveRegion();
        liveRegion.textContent = !isPressed ? 
          'Dyslexia-friendly font enabled' : 
          'Dyslexia-friendly font disabled';
      });
      
      // Create a live region if it doesn't exist
      function createLiveRegion() {
        const region = document.createElement('div');
        region.setAttribute('aria-live', 'polite');
        region.setAttribute('aria-atomic', 'true');
        region.className = 'visually-hidden';
        document.body.appendChild(region);
        return region;
      }
    });

    // Modal functionality
    const modal = document.getElementById("aboutModal");
    const btn = document.getElementById("aboutBtn");
    const span = document.getElementsByClassName("close-button")[0];
    const modalTitle = document.getElementById("modalTitle");
    
    // Function to trap focus inside modal
    function trapFocus(element) {
      const focusableElements = element.querySelectorAll(
        'a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select'
      );
      const firstFocusable = focusableElements[0];
      const lastFocusable = focusableElements[focusableElements.length - 1];
      
      element.addEventListener('keydown', function(e) {
        if (e.key !== 'Tab') return;
        
        if (e.shiftKey) {
          if (document.activeElement === firstFocusable) {
            e.preventDefault();
            lastFocusable.focus();
          }
        } else {
          if (document.activeElement === lastFocusable) {
            e.preventDefault();
            firstFocusable.focus();
          }
        }
      });
    }
    
    btn.onclick = function() {
      modal.style.display = "block";
      modal.setAttribute('aria-hidden', 'false');
      document.body.classList.add('modal-open');
      trapFocus(modal);
      // Focus on close button when modal opens
      setTimeout(() => span.focus(), 100);
    }
    
    function closeModal() {
      modal.style.display = "none";
      modal.setAttribute('aria-hidden', 'true');
      document.body.classList.remove('modal-open');
      btn.focus();
    }
    
    span.onclick = closeModal;
    
    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && modal.style.display === 'block') {
        closeModal();
      }
    });
    
    window.onclick = function(event) {
      if (event.target == modal) {
        closeModal();
      }
    }
    
    // Add ARIA live region for dynamic content updates
    const liveRegion = document.createElement('div');
    liveRegion.setAttribute('aria-live', 'polite');
    liveRegion.setAttribute('aria-atomic', 'true');
    liveRegion.className = 'visually-hidden';
    document.body.appendChild(liveRegion);
  </script>
</body>
</html>
